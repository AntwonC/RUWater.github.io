<!DOCTYPE html>
<html>
  <head>
    <meta name = "viewport" content = "initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      /* Set the size of the div element that contains the map */
      #map {
        height: 100%;  /* The height is 400 pixels */
       }
       html, body{
        height: 100%;
        margin: 0;
        padding: 0;
       }
    </style>
  </head>
  <body>
    <h3>Your Location, and Nearby Water Refill Stations</h3>
    <div id="map"></div>
    <script>

// Initialize and add the map
var map, infoWindow;
function initMap() {
/* FILL THESE IN LATER WITH WATER BOTTLE REFILL LOCATIONS??
 var locations = [ 
  ['Bondi Beach', -33.890542, 151.274856, 4],
  ['Coogee Beach', -33.923036, 151.259052, 5],
  ['Cronulla Beach', -34.028249, 151.157507, 3],
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
  ['Maroubra Beach', -33.950198, 151.259302, 1]
];  */
 
map = new google.maps.Map(document.getElementById('map'), {
  center: new google.maps.LatLng(40.5008, 74.4474),
  zoom: 17
  //mapTypeId: google.maps.MapTypeId.ROADMAP
});

infoWindow = new google.maps.InfoWindow;

/*var marker, i; 

for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  });

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i));
}  */
if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            infoWindow.setPosition(pos);
            infoWindow.setContent('Location found.');
            infoWindow.open(map);
            map.setCenter(pos);
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }

      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                              'Error: The Geolocation service failed.' :
                              'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
}
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCdYdpIJf2JRTSHLLe5NIyCvshD_22huqI&callback=initMap">
    </script>
  </body>
</html>